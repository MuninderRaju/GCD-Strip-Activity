<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive GCD Strip Activity</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for the application */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Style for the visual strips */
        .strip {
            /* Transition for smooth width changes */
            transition: width 0.8s ease-in-out, background-color 0.5s ease;
        }
        /* Custom class to prevent button from being enabled when it shouldn't be */
        .btn-disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <div class="container bg-white p-6 md:p-8 rounded-xl shadow-lg w-full max-w-3xl mx-auto text-center">
        <h1 class="text-2xl md:text-3xl font-bold text-sky-700">Interactive GCD Strip Activity</h1>
        <p class="text-pink-600 font-bold mt-2 mb-6">Find the Greatest Common Divisor (GCD) of any two numbers using the Euclidean Algorithm.</p>

        <!-- Input section for user to enter numbers -->
        <div id="input-section" class="flex flex-col sm:flex-row items-center justify-center gap-4 my-6">
            <input type="number" id="num1" placeholder="Enter first number" class="w-full sm:w-48 p-3 border-2 border-slate-300 rounded-lg text-center focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition font-bold text-black" value="100">
            <input type="number" id="num2" placeholder="Enter second number" class="w-full sm:w-48 p-3 border-2 border-slate-300 rounded-lg text-center focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition font-bold text-black" value="60">
        </div>
        <div id="error-message" class="text-red-500 font-medium h-6 mb-4"></div>

        <!-- Main activity area where strips are displayed -->
        <div id="activity-area" class="my-6 p-4 bg-sky-50 border border-sky-200 rounded-lg min-h-[150px] flex items-center justify-center">
            <div id="strips-container" class="w-full flex flex-col gap-4 items-start">
                <!-- Strips will be dynamically inserted here -->
            </div>
        </div>

        <!-- Instructions panel -->
        <div id="instructions" class="mt-4 p-2 min-h-[50px] text-lg text-slate-800">
            <p id="instruction-text"></p>
        </div>

        <!-- Control buttons -->
        <div id="controls" class="mt-6 flex justify-center gap-4">
            <button id="action-btn" class="bg-sky-600 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-sky-700 active:transform active:scale-95 transition-all duration-150">Start</button>
            <button id="reset-btn" class="bg-slate-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-slate-600 active:transform active:scale-95 transition-all duration-150" style="display: none;">Reset</button>
        </div>

        <!-- Footer Section -->
        <footer class="mt-8 pt-4 border-t-2 border-slate-200 text-slate-500 text-sm">
            A MUNINDER RAJU SA(Maths) <br>GHS Eidgaon, Nirmal, Telangana
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Element References ---
            const num1Input = document.getElementById('num1');
            const num2Input = document.getElementById('num2');
            const actionBtn = document.getElementById('action-btn');
            const resetBtn = document.getElementById('reset-btn');
            const instructionText = document.getElementById('instruction-text');
            const stripsContainer = document.getElementById('strips-container');
            const errorMessage = document.getElementById('error-message');

            // --- State Variables ---
            let steps = []; // Stores the sequence of calculations for the visualization
            let currentStepIndex = -1; // Tracks the current step in the visualization
            let isAnimating = false; // Prevents clicks during animations

            // --- Color Palette for Strips ---
            const stripColors = [
                'bg-sky-500', 'bg-amber-500', 'bg-red-500', 
                'bg-emerald-500', 'bg-indigo-500', 'bg-pink-500'
            ];
            const finalGcdColor = 'bg-green-600';

            // --- Core Logic Functions ---

            /**
             * Calculates all steps of the Euclidean algorithm and stores them.
             * @param {number} numA - The first number.
             * @param {number} numB - The second number.
             */
            const calculateSteps = (numA, numB) => {
                steps = [];
                let a = Math.max(numA, numB);
                let b = Math.min(numA, numB);

                // Add the initial state
                steps.push({ a, b, remainder: null, isInitial: true });

                // Loop until the remainder is 0
                while (b > 0) {
                    let remainder = a % b;
                    let quotient = Math.floor(a / b);
                    steps.push({ a: b, b: remainder, remainderOf: a, quotient: quotient });
                    a = b;
                    b = remainder;
                }
            };
            
            /**
             * Displays the current step of the algorithm visually.
             */
            const displayCurrentStep = () => {
                isAnimating = true;
                const stepData = steps[currentStepIndex];
                
                updateInstructions(stepData);
                updateStrips(stepData);
                
                if (stepData.b === 0) {
                    actionBtn.style.display = 'none';
                    resetBtn.style.display = 'inline-block';
                    actionBtn.classList.add('btn-disabled');
                }
                
                setTimeout(() => { isAnimating = false; }, 800); // Animation delay
            };
            
            /**
             * Updates the instruction text panel.
             * @param {object} stepData - The data for the current step.
             */
            const updateInstructions = (stepData) => {
                if (stepData.isInitial) {
                    instructionText.innerHTML = `We start with two strips: <b class="text-sky-600">${stepData.a}</b> and <b class="text-amber-600">${stepData.b}</b>.`;
                } else if (stepData.b !== 0) {
                    const colorA = stripColors[(currentStepIndex) % stripColors.length];
                    const colorB = stripColors[(currentStepIndex + 1) % stripColors.length];
                    instructionText.innerHTML = `Measure the <b class="${colorA}">${stepData.remainderOf}</b> strip with the <b class="${colorB}">${stepData.a}</b> strip. The remainder is <b class="text-red-600">${stepData.b}</b>.`;
                } else { // When GCD is found
                    const prevStep = steps[currentStepIndex - 1];
                    instructionText.innerHTML = `Finally, measure the <b class="${stripColors[(currentStepIndex) % stripColors.length]}">${prevStep.b}</b> strip with the <b class="${finalGcdColor}">${prevStep.a}</b> strip. It fits perfectly! (<b class="font-mono">${prevStep.b} รท ${prevStep.a} = ${prevStep.quotient}</b>)<br>Since the remainder is zero, the last strip used (<b class="${finalGcdColor}">${stepData.a}</b>) is our GCD.`;
                }
            };

            /**
             * Updates the visual strips.
             * @param {object} stepData - The data for the current step.
             */
            const updateStrips = (stepData) => {
                const { a, b } = stepData;
                const colorA = stripColors[currentStepIndex % stripColors.length];
                const colorB = stripColors[(currentStepIndex + 1) % stripColors.length];
                
                if (stepData.isInitial) {
                    stripsContainer.innerHTML = `
                        <div class="strip ${colorA} h-10 rounded-md text-white font-bold flex items-center justify-center px-4 shadow" style="width: 100%;">${a}</div>
                        <div class="strip ${colorB} h-10 rounded-md text-white font-bold flex items-center justify-center px-4 shadow" style="width: ${(b / a) * 100}%;">${b}</div>
                    `;
                } else if (b !== 0) {
                    stripsContainer.innerHTML = `
                        <div class="strip ${colorA} h-10 rounded-md text-white font-bold flex items-center justify-center px-4 shadow" style="width: 100%;">${a}</div>
                        <div class="strip ${colorB} h-10 rounded-md text-white font-bold flex items-center justify-center px-4 shadow" style="width: ${(b / a) * 100}%;">${b}</div>
                    `;
                } else { // GCD Display
                    const prevStep = steps[currentStepIndex - 1];
                    let finalStripsHTML = '';
                    for (let i = 0; i < prevStep.quotient; i++) {
                        finalStripsHTML += `<div class="strip ${finalGcdColor} h-10 rounded-md text-white font-bold flex items-center justify-center" style="width: ${100 / prevStep.quotient}%; margin: 0 1px;">${a}</div>`;
                    }
                    stripsContainer.innerHTML = `
                        <div class="text-slate-700 mb-2 w-full text-left font-medium">${prevStep.b}</div>
                        <div class="strip bg-slate-300 h-10 rounded-md w-full flex justify-start p-0 shadow-inner">
                            ${finalStripsHTML}
                        </div>
                        <div class="text-slate-700 mt-2 w-full text-left font-medium">GCD = ${a}</div>
                    `;
                }
            };

            /**
             * Resets the activity to its initial state.
             */
            const resetActivity = () => {
                steps = [];
                currentStepIndex = -1;
                isAnimating = false;
                
                stripsContainer.innerHTML = '';
                errorMessage.textContent = '';
                instructionText.innerHTML = `<span class="text-red-600 font-bold">Enter two positive numbers and click 'Start' to begin.</span>`;
                
                actionBtn.textContent = 'Start';
                actionBtn.style.display = 'inline-block';
                resetBtn.style.display = 'none';
                
                num1Input.disabled = false;
                num2Input.disabled = false;
                actionBtn.classList.remove('btn-disabled');
            };

            /**
             * Handles the action button click to start or advance the activity.
             */
            const handleActionClick = () => {
                if (isAnimating || actionBtn.classList.contains('btn-disabled')) return;

                if (currentStepIndex === -1) { // Starting the activity
                    const num1 = parseInt(num1Input.value);
                    const num2 = parseInt(num2Input.value);

                    if (isNaN(num1) || isNaN(num2) || num1 <= 0 || num2 <= 0) {
                        errorMessage.textContent = 'Please enter two positive whole numbers.';
                        return;
                    }
                    errorMessage.textContent = '';
                    
                    calculateSteps(num1, num2);
                    actionBtn.textContent = 'Next Step';
                    num1Input.disabled = true;
                    num2Input.disabled = true;
                }

                currentStepIndex++;
                if (currentStepIndex < steps.length) {
                    displayCurrentStep();
                }
            };

            // --- Event Listeners ---
            actionBtn.addEventListener('click', handleActionClick);
            resetBtn.addEventListener('click', resetActivity);
            [num1Input, num2Input].forEach(input => {
                input.addEventListener('input', () => {
                    errorMessage.textContent = ''; // Clear error on typing
                });
            });

            // Initialization
            resetActivity();
        });
    </script>

</body>
</html>
